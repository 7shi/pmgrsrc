#!/bin/sh
# This file is in the public domain.

if [ $# -gt 0 ]
then
	tar=tar
	target=$1
	shift
	if [ "$target" = "-gtar" ]
	then
		tar=gtar
		target=$1
		shift
	fi
	case $target in
		z | j)
			type=$target;
			target=$1
			shift
			;;
		*.tar.gz | *.tgz)
			type=z
			;;
		*.tar.bz2 | *.tbz | *.pmgr)
			type=j
			;;
	esac

	case $type in
		z)
			pmgr-sizecat $target | gzip -dc | $tar xf - "$@"
			exit
			;;
		j)
			pmgr-sizecat $target | pmgr-bzip2 -dc | $tar xf - "$@"
			exit
			;;
	esac
fi

echo "usage: `basename $0` z/j archive"
exit 1
